<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>Personal Discover â€” Clean & Minimal</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://unpkg.com/@phosphor-icons/web"></script>
  <meta name="color-scheme" content="dark light" />
  <style>
    /* TTS-inspired clean design system - Minimal CSS with Tailwind */
    :root { 
      color-scheme: light;
      --transition-smooth: all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);
    }
    
    /* Clean TTS-inspired focus styles */
    *:focus-visible { 
      outline: 2px solid rgb(59 130 246); 
      outline-offset: 2px;
      transition: var(--transition-smooth);
    }
    
    /* TTS-inspired minimal scrollbar */
    ::-webkit-scrollbar { 
      width: 8px;
      height: 8px;
    }
    ::-webkit-scrollbar-track {
      background: rgb(229 231 235);
      border-radius: 4px;
    }
    ::-webkit-scrollbar-thumb { 
      background: rgb(156 163 175);
      border-radius: 4px;
      transition: var(--transition-smooth);
    }
    ::-webkit-scrollbar-thumb:hover {
      background: rgb(107 114 128);
    }
    
    /* TTS-inspired clean selection */
    ::selection {
      background: rgb(59 130 246 / 0.15);
      color: rgb(55 65 81);
    }
    
    /* Consistent Phosphor icon sizing */
    .ph {
      display: inline-block;
      vertical-align: middle;
    }
    
    /* TTS-inspired clean range slider */
    input[type="range"] {
      -webkit-appearance: none;
      appearance: none;
      background: transparent;
      cursor: pointer;
    }
    input[type="range"]::-webkit-slider-track {
      background: rgb(229 231 235);
      height: 4px;
      border-radius: 2px;
    }
    input[type="range"]::-webkit-slider-thumb {
      -webkit-appearance: none;
      appearance: none;
      background: currentColor;
      height: 16px;
      width: 16px;
      border-radius: 50%;
      border: 2px solid white;
      box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
      transition: var(--transition-smooth);
    }
    input[type="range"]::-webkit-slider-thumb:hover {
      transform: scale(1.1);
      box-shadow: 0 2px 6px rgba(0, 0, 0, 0.15);
    }
    
    /* TTS-inspired loading skeleton */
    .skeleton {
      background: linear-gradient(90deg, rgb(249 250 251) 25%, rgb(229 231 235) 50%, rgb(249 250 251) 75%);
      background-size: 200% 100%;
      animation: loading 1.5s infinite ease-in-out;
    }
    @keyframes loading {
      0% { background-position: 200% 0; }
      100% { background-position: -200% 0; }
    }
    
    /* TTS-inspired smooth fade-in */
    .fade-in {
      animation: fadeIn 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);
    }
    @keyframes fadeIn {
      from {
        opacity: 0;
        transform: translateY(8px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }
    
    /* TTS-inspired reduced motion preferences */
    @media (prefers-reduced-motion: reduce) {
      *, *::before, *::after {
        animation-duration: 0.01ms !important;
        animation-iteration-count: 1 !important;
        transition-duration: 0.01ms !important;
        scroll-behavior: auto !important;
      }
      
      input[type="range"]::-webkit-slider-thumb:hover {
        transform: none;
      }
    }
    
    /* Mobile-specific overrides (minimal custom CSS) */
    @media (max-width: 768px) {
      .discovery-carousel {
        scroll-snap-type: x mandatory;
        -webkit-overflow-scrolling: touch;
        scrollbar-width: none;
        -ms-overflow-style: none;
      }
      
      .discovery-carousel::-webkit-scrollbar {
        display: none;
      }
      
      .discovery-card {
        scroll-snap-align: start;
      }
      
      .mobile-results-height {
        height: calc(100vh - 320px);
        min-height: 300px;
        max-height: none;
      }
      
      /* Improve touch targets and spacing on mobile */
      button, select, input[type="range"] {
        touch-action: manipulation;
      }
      
      /* Better slider styling for mobile - enhanced */
      input[type="range"] {
        -webkit-appearance: none;
        appearance: none;
        background: transparent;
        cursor: pointer;
        height: 44px; /* Better touch target */
      }
      
      input[type="range"]::-webkit-slider-track {
        background: #3f3f46;
        height: 4px;
        border-radius: 2px;
      }
      
      input[type="range"]::-webkit-slider-thumb {
        -webkit-appearance: none;
        appearance: none;
        background: currentColor;
        height: 20px;
        width: 20px;
        border-radius: 50%;
        border: 2px solid #18181b;
      }
      
      input[type="range"]::-moz-range-track {
        background: #3f3f46;
        height: 4px;
        border-radius: 2px;
      }
      
      input[type="range"]::-moz-range-thumb {
        background: currentColor;
        height: 16px;
        width: 16px;
        border-radius: 50%;
        border: 2px solid #18181b;
        cursor: pointer;
      }
    }
    
    /* Tablet and desktop overrides for scroll snap */
    @media (min-width: 769px) {
      .discovery-carousel {
        scroll-snap-type: none;
      }
      
      .discovery-card {
        scroll-snap-align: none;
      }
    }
    
    /* XL Desktop: Override carousel behavior for stacked layout */
    @media (min-width: 1280px) {
      .discovery-carousel {
        display: block !important;
        grid-template-columns: none !important;
        overflow-x: visible !important;
        margin: 0 !important;
        padding: 0 !important;
      }
      
      .discovery-card {
        min-width: auto !important;
        scroll-snap-align: none !important;
      }
      
      /* Override the 50vh height constraint on results for split layout */
      #results {
        height: auto !important;
      }
    }
  </style>
</head>
<body class="bg-gray-50 text-gray-800 min-h-screen xl:h-screen xl:overflow-hidden flex flex-col font-normal leading-relaxed transition-colors duration-300">
  <header class="border-b border-gray-100 flex-shrink-0 bg-white transition-all duration-300">
    <div class="w-full px-6 xl:px-8 py-4">
      <!-- TTS-inspired clean header layout -->
      <div class="flex items-center justify-between">
        <div class="flex items-center gap-4">
          <div class="h-8 w-8 flex items-center justify-center text-gray-600">
            <i class="ph ph-waveform text-xl"></i>
          </div>
          <h1 class="text-xl font-semibold text-gray-700">Personal Discover</h1>
        </div>
        
        <!-- TTS-inspired clean auth controls -->
        <div class="flex items-center gap-3">
          <span id="authStatus" class="text-sm text-gray-500 font-normal">Not connected</span>
          <div class="flex items-center gap-2">
            <button id="checkBtn" class="inline-flex items-center justify-center px-3 py-2 rounded-md bg-transparent border border-gray-200 hover:bg-gray-50 text-sm font-medium text-gray-600 transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-1">Check API</button>
            <button id="loginBtn" class="inline-flex items-center justify-center px-4 py-2 rounded-md bg-blue-500 hover:bg-blue-600 text-sm font-medium text-white transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-1">Connect Spotify</button>
            <button id="logoutBtn" class="inline-flex items-center justify-center px-3 py-2 rounded-md bg-transparent border border-gray-200 hover:bg-gray-50 text-sm font-medium text-gray-600 transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-gray-400 focus:ring-offset-1 hidden">Sign out</button>
          </div>
        </div>
      </div>
    </div>
  </header>

  <main class="flex-1 w-full px-6 xl:px-8 py-8 space-y-8 xl:overflow-hidden flex flex-col">
    <!-- Mobile Carousel Indicators -->
    <div class="carousel-indicators md:hidden flex justify-center gap-2 mb-6 flex-shrink-0"></div>
    
    <!-- Desktop: Split layout, Mobile/Tablet: Stacked layout -->
    <div class="space-y-6 xl:space-y-0 xl:flex xl:gap-8 xl:items-start xl:overflow-hidden xl:flex-1">
      <!-- Controls Panel -->
      <div class="xl:w-2/5 xl:h-full xl:overflow-y-auto xl:scrollbar-thin xl:scrollbar-thumb-zinc-600 xl:scrollbar-track-transparent">
        <!-- Discovery Cards - Mobile: Carousel, Desktop: Grid, XL: Stacked -->
        <section class="discovery-carousel 
                        flex md:grid xl:block 
                        overflow-x-auto md:overflow-visible xl:overflow-visible 
                        md:grid-cols-2 lg:grid-cols-3 
                        gap-4 xl:space-y-4 
                        -mx-4 md:mx-0 px-4 md:px-0 
                        scroll-smooth" 
                 style="scroll-behavior: smooth;">
      <!-- Taste DNA -->
      <div class="discovery-card rounded-lg border border-gray-100 bg-white p-6 hover:bg-gray-50/50 transition-all duration-300
                   w-full min-w-full md:min-w-0 md:w-auto xl:w-full 
                   flex-shrink-0 md:flex-shrink xl:flex-shrink">
        <div class="flex items-center justify-between mb-3">
          <h2 class="text-lg font-semibold text-gray-700">Your Taste DNA</h2>
          <span id="dnaStatus" class="text-xs text-gray-500 bg-gray-50 px-2 py-1 rounded-md">Not built</span>
        </div>
        <p class="text-sm text-gray-500 leading-relaxed">Build a fingerprint of your listening taste from audio features & genres.</p>
        <div id="dnaFeatures" class="mt-3 space-y-2 hidden">
          <div class="grid grid-cols-2 gap-2 text-xs">
            <div class="flex justify-between"><span>Danceability:</span><span id="dnaFeatureDanceability">-</span></div>
            <div class="flex justify-between"><span>Energy:</span><span id="dnaFeatureEnergy">-</span></div>
            <div class="flex justify-between"><span>Acousticness:</span><span id="dnaFeatureAcousticness">-</span></div>
            <div class="flex justify-between"><span>Valence:</span><span id="dnaFeatureValence">-</span></div>
            <div class="flex justify-between"><span>Tempo:</span><span id="dnaFeatureTempo">-</span></div>
          </div>
          <div id="dnaGenres" class="flex flex-wrap gap-1 mt-2"></div>
        </div>
        <div class="mt-5 flex items-center gap-2">
          <button id="buildDNA" class="inline-flex items-center justify-center px-4 py-2 rounded-md bg-blue-500 hover:bg-blue-600 text-sm font-medium text-white transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-1">Build DNA</button>
          <button id="rebuildDNA" class="inline-flex items-center justify-center px-3 py-2 rounded-md bg-transparent border border-gray-200 hover:bg-gray-50 text-sm font-medium text-gray-600 transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-gray-400 focus:ring-offset-1 hidden">Rebuild</button>
        </div>
      </div>

      <!-- Mood Discovery -->
      <div class="discovery-card rounded-lg border border-gray-100 bg-white p-6 hover:bg-gray-50/50 transition-all duration-300
                   w-full min-w-full md:min-w-0 md:w-auto xl:w-full 
                   flex-shrink-0 md:flex-shrink xl:flex-shrink">
        <div class="flex items-center justify-between mb-3">
          <h2 class="text-lg font-semibold text-gray-700">Mood Discovery</h2>
          <span class="text-xs text-gray-500 bg-gray-50 px-2 py-1 rounded-md">Instant mood radio</span>
        </div>
        <p class="text-sm text-gray-500 leading-relaxed">Discover tracks that fit your current emotional/musical mood.</p>
        <div class="mt-5 grid grid-cols-2 sm:grid-cols-3 gap-2">
          <button id="moodEnergetic" class="inline-flex items-center justify-center gap-2 px-3 py-2 rounded-md bg-red-500 hover:bg-red-600 text-sm font-medium text-white transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-1"><i class="ph ph-lightning"></i>Energetic</button>
          <button id="moodChill" class="inline-flex items-center justify-center gap-2 px-3 py-2 rounded-md bg-blue-500 hover:bg-blue-600 text-sm font-medium text-white transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-1"><i class="ph ph-waves"></i>Chill</button>
          <button id="moodMelancholic" class="inline-flex items-center justify-center gap-2 px-3 py-2 rounded-md bg-indigo-500 hover:bg-indigo-600 text-sm font-medium text-white transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-1"><i class="ph ph-cloud-rain"></i>Melancholic</button>
          <button id="moodEuphoric" class="inline-flex items-center justify-center gap-2 px-3 py-2 rounded-md bg-yellow-500 hover:bg-yellow-600 text-sm font-medium text-white transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-yellow-500 focus:ring-offset-1"><i class="ph ph-confetti"></i>Euphoric</button>
          <button id="moodContemplative" class="inline-flex items-center justify-center gap-2 px-3 py-2 rounded-md bg-purple-500 hover:bg-purple-600 text-sm font-medium text-white transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:ring-offset-1"><i class="ph ph-brain"></i>Contemplative</button>
          <button id="moodAggressive" class="inline-flex items-center justify-center gap-2 px-3 py-2 rounded-md bg-gray-500 hover:bg-gray-600 text-sm font-medium text-white transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-1"><i class="ph ph-fire"></i>Aggressive</button>
          <button id="moodRomantic" class="inline-flex items-center justify-center gap-2 px-3 py-2 rounded-md bg-pink-500 hover:bg-pink-600 text-sm font-medium text-white transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-pink-500 focus:ring-offset-1"><i class="ph ph-heart"></i>Romantic</button>
          <button id="moodFocus" class="inline-flex items-center justify-center gap-2 px-3 py-2 rounded-md bg-green-500 hover:bg-green-600 text-sm font-medium text-white transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-1"><i class="ph ph-target"></i>Focus</button>
          <button id="moodNostalgic" class="inline-flex items-center justify-center gap-2 px-3 py-2 rounded-md bg-amber-500 hover:bg-amber-600 text-sm font-medium text-white transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-amber-500 focus:ring-offset-1"><i class="ph ph-radio"></i>Nostalgic</button>
          <button id="moodParty" class="inline-flex items-center justify-center gap-2 px-3 py-2 rounded-md bg-fuchsia-500 hover:bg-fuchsia-600 text-sm font-medium text-white transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-fuchsia-500 focus:ring-offset-1"><i class="ph ph-disco-ball"></i>Party</button>
          <button id="moodPeaceful" class="inline-flex items-center justify-center gap-2 px-3 py-2 rounded-md bg-emerald-500 hover:bg-emerald-600 text-sm font-medium text-white transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:ring-offset-1"><i class="ph ph-leaf"></i>Peaceful</button>
          <button id="moodDramatic" class="inline-flex items-center justify-center gap-2 px-3 py-2 rounded-md bg-slate-500 hover:bg-slate-600 text-sm font-medium text-white transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-slate-500 focus:ring-offset-1"><i class="ph ph-mask-happy"></i>Dramatic</button>
        </div>
        <div class="mt-3">
          <span id="moodStats" class="text-xs text-zinc-400"></span>
        </div>
      </div>

      <!-- Genre-Driven Discovery (Hidden Gems) -->
      <div class="discovery-card rounded-lg border border-gray-100 bg-white p-6 hover:bg-gray-50/50 transition-all duration-300
                   w-full min-w-full md:min-w-0 md:w-auto xl:w-full 
                   flex-shrink-0 md:flex-shrink xl:flex-shrink">
        <div class="flex items-center justify-between mb-3">
          <h2 class="text-lg font-semibold text-gray-700">Genre-Driven Discovery</h2>
          <span id="popBiasLabel" class="text-xs text-gray-500 bg-gray-50 px-2 py-1 rounded-md">Obscure</span>
        </div>
        <p class="text-sm text-gray-500 leading-relaxed">Uses your top genres â†’ finds new/under-popular artists â†’ picks top tracks.</p>

        <!-- Feature Toolbar -->
        <div class="mt-5 -mx-6 px-6 py-4 border-y border-gray-100 bg-gray-50/30">
          <div class="flex items-center gap-4">
            <div class="flex-1">
              <label class="flex items-center justify-between gap-3 text-sm font-medium text-gray-600">
                <span>Popularity bias</span>
                <span id="popBiasValue" class="text-blue-500 font-semibold">35</span>
              </label>
              <input id="popBias" type="range" min="0" max="100" value="35" class="w-full accent-blue-500 h-2 touch-manipulation cursor-pointer mt-2" />
              <p class="text-xs text-gray-400 mt-2 leading-relaxed">Lower = more obscure (favor low-popularity artists).</p>
            </div>
          </div>
        </div>

        <div class="mt-5 flex items-center gap-3">
          <button id="runGenre" class="inline-flex items-center justify-center px-4 py-2 rounded-md bg-emerald-500 hover:bg-emerald-600 text-sm font-medium text-white transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:ring-offset-1">Generate</button>
          <span id="genreStats" class="text-xs font-medium text-gray-400"></span>
        </div>
      </div>

      <!-- Artist Graph Explorer -->
      <div class="discovery-card rounded-lg border border-gray-100 bg-white p-6 hover:bg-gray-50/50 transition-all duration-300
                   w-full min-w-full md:min-w-0 md:w-auto xl:w-full 
                   flex-shrink-0 md:flex-shrink xl:flex-shrink">
        <div class="flex items-center justify-between mb-3">
          <h2 class="text-lg font-semibold text-gray-700">Artist Graph Explorer</h2>
          <span class="text-xs text-gray-500 bg-gray-50 px-2 py-1 rounded-md">1-2 hops</span>
        </div>
        <p class="text-sm text-gray-500 leading-relaxed">Pick a top artist â†’ explore related artists via genre overlap.</p>
        <div class="mt-4">
          <select id="seedArtist" class="w-full bg-gray-50 border border-gray-100 rounded-md px-3 py-2 text-sm font-medium text-gray-600 transition-all duration-200 hover:bg-white hover:border-gray-200 focus:bg-white focus:border-blue-300 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-1">
            <option value="">Select an artist...</option>
          </select>
        </div>
        <div class="mt-4 flex items-center gap-3">
          <button id="runGraph" class="inline-flex items-center justify-center px-4 py-2 rounded-md bg-purple-500 hover:bg-purple-600 text-sm font-medium text-white transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:ring-offset-1">Explore</button>
          <span id="graphStats" class="text-xs font-medium text-gray-400"></span>
        </div>
      </div>

      <!-- Freshness Focus -->
      <div class="discovery-card rounded-lg border border-gray-100 bg-white p-6 hover:bg-gray-50/50 transition-all duration-300
                   w-full min-w-full md:min-w-0 md:w-auto xl:w-full 
                   flex-shrink-0 md:flex-shrink xl:flex-shrink">
        <div class="flex items-center justify-between mb-3">
          <h2 class="text-lg font-semibold text-gray-700">Freshness Focus</h2>
          <span class="text-xs text-gray-500 bg-gray-50 px-2 py-1 rounded-md">New releases</span>
        </div>
        <p class="text-sm text-gray-500 leading-relaxed">Find new releases from your top artists (last 30 days).</p>
        <div class="mt-4">
          <div class="flex items-center gap-3">
            <input id="freshnessDays" type="range" min="7" max="90" value="30" class="flex-1 accent-blue-500 h-2 touch-manipulation" />
            <span id="freshnessDaysValue" class="text-sm w-8 text-right font-mono text-gray-600">30</span>
            <span class="text-xs text-gray-400">days</span>
          </div>
        </div>
        <div class="mt-4 flex items-center gap-3">
          <button id="runFreshness" class="inline-flex items-center justify-center px-4 py-2 rounded-md bg-blue-500 hover:bg-blue-600 text-sm font-medium text-white transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-1">Scan</button>
          <span id="freshnessStats" class="text-xs font-medium text-gray-400"></span>
        </div>
      </div>

      <!-- Time-Machine -->
      <div class="discovery-card rounded-lg border border-gray-100 bg-white p-6 hover:bg-gray-50/50 transition-all duration-300
                   w-full min-w-full md:min-w-0 md:w-auto xl:w-full 
                   flex-shrink-0 md:flex-shrink xl:flex-shrink">
        <div class="flex items-center justify-between mb-3">
          <h2 class="text-lg font-semibold text-gray-700">Time-Machine</h2>
          <span class="text-xs text-gray-500 bg-gray-50 px-2 py-1 rounded-md">Then â†’ Now</span>
        </div>
        <p class="text-sm text-gray-500 leading-relaxed">Resurface old gems from your library and pair with modern analogs.</p>
        <div class="mt-4">
          <select id="yearSelect" class="w-full bg-gray-50 border border-gray-100 rounded-md px-3 py-2 text-sm font-medium text-gray-600 transition-all duration-200 hover:bg-white hover:border-gray-200 focus:bg-white focus:border-blue-300 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-1">
            <option value="">Select a year...</option>
          </select>
        </div>
        <div class="mt-4 flex items-center gap-3">
          <button id="runTimeMachine" class="inline-flex items-center justify-center px-4 py-2 rounded-md bg-orange-500 hover:bg-orange-600 text-sm font-medium text-white transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-orange-500 focus:ring-offset-1">Build Then â†’ Now</button>
          <span id="timeMachineStats" class="text-xs font-medium text-gray-400"></span>
        </div>
      </div>

      <!-- Gap Analysis (genre overlap) -->
      <div class="discovery-card rounded-lg border border-gray-100 bg-white p-6 hover:bg-gray-50/50 transition-all duration-300 w-full md:w-auto xl:w-full flex-shrink-0 xl:flex-shrink xl:mb-0 lg:col-span-3 xl:col-span-1">
        <div class="flex items-center justify-between mb-3">
          <h2 class="text-lg font-semibold text-gray-700">Gap Analysis (Genre Overlap)</h2>
          <span class="text-xs text-gray-500 bg-gray-50 px-2 py-1 rounded-md">"How did I miss these?"</span>
        </div>
        <p class="text-sm text-gray-500 leading-relaxed">Find artists that match many of your genres but aren't in your top artists.</p>
        <div class="mt-4 flex items-center gap-3">
          <button id="runGap" class="inline-flex items-center justify-center px-4 py-2 rounded-md bg-gray-600 hover:bg-gray-700 text-sm font-medium text-white transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-gray-600 focus:ring-offset-1">Scan</button>
          <span id="gapStats" class="text-xs font-medium text-gray-400"></span>
        </div>
        <div id="gapList" class="mt-3 grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-2"></div>
      </div>
        </section>
      </div>

      <!-- Results Panel -->
      <div class="xl:flex-1 xl:h-full xl:flex xl:flex-col">
        <!-- Results -->
        <section class="results-container rounded-lg border border-gray-100 bg-white overflow-hidden xl:flex-1 xl:flex xl:flex-col xl:min-h-0 flex flex-col md:flex-col h-auto transition-all duration-300">
      <!-- Clean Results Toolbar -->
      <div class="p-6 bg-white border-b border-gray-100 md:sticky md:top-0 md:z-10">
        <div class="flex items-center justify-between mb-5">
          <h3 class="text-xl font-semibold text-gray-700">Results</h3>
          <button id="mobileFiltersToggle" class="md:hidden inline-flex items-center justify-center px-3 py-2 rounded-md bg-transparent border border-gray-200 hover:bg-gray-50 text-sm font-medium text-gray-600 transition-all duration-200">
            Filters
          </button>
          <span id="obscurityStats" class="text-xs font-medium text-gray-400 hidden md:block"></span>
        </div>
        
        <!-- Clean mobile controls -->
        <div id="mobileControls" class="hidden md:block space-y-4 md:space-y-0 md:flex md:items-center md:gap-6">
          <!-- Market selection -->
          <div class="flex items-center gap-3">
            <span class="text-gray-600 text-sm font-medium">Market</span>
            <select id="market" class="bg-gray-50 border border-gray-100 rounded-md px-3 py-2 text-sm font-medium text-gray-600 transition-all duration-200 hover:bg-white hover:border-gray-200 focus:bg-white focus:border-blue-300 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-1">
              <option value="GB" selected>GB</option>
              <option value="US">US</option>
              <option value="DE">DE</option>
              <option value="JP">JP</option>
            </select>
          </div>

          <!-- Obscurity control -->
          <div class="space-y-2 md:space-y-0 md:flex md:items-center md:gap-3 md:flex-1">
            <label class="text-sm text-gray-600 font-medium md:whitespace-nowrap">Obscurity Filter</label>
            <div class="flex items-center gap-3 md:flex-1">
              <input id="obscuritySlider" type="range" min="0" max="100" value="0" class="flex-1 md:w-32 accent-red-500 h-2 touch-manipulation cursor-pointer" />
              <span id="obscurityValue" class="w-8 text-right text-sm font-semibold text-red-500">0</span>
            </div>
          </div>
          
          <!-- DNA sort -->
          <div class="flex items-center gap-3 md:gap-2">
            <label class="flex items-center gap-3 md:gap-2 text-sm text-gray-600">
              <input id="sortByDNA" type="checkbox" class="accent-blue-500 w-4 h-4 touch-manipulation rounded" disabled>
              <span class="font-medium md:whitespace-nowrap">Sort by DNA</span>
            </label>
          </div>
        </div>
        
        <!-- Mobile stats -->
        <div class="mt-3 md:hidden">
          <span id="obscurityStats" class="text-xs font-medium text-gray-400"></span>
        </div>
      </div>

      <div id="results" class="divide-y divide-gray-100
                       xl:overflow-y-auto xl:flex-1 xl:h-auto 
                       xl:min-h-[300px]" 
           style="-webkit-overflow-scrolling: touch;"></div>
        </section>
      </div>
    </div>
  </main>


  <script type="module" src="./src/mood-discovery.js"></script>
  <script type="module" src="./src/mobile.js"></script>
  <script type="module" src="./src/main.js"></script>
</body>
</html>
